(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{186:function(e,t,r){e.exports=r.p+"img/SingPassLogo.def2598.svg"},187:function(e,t,r){var content=r(195);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(51).default)("64777b9c",content,!0,{sourceMap:!1})},188:function(e,t,r){e.exports=r.p+"img/tick.25ffec9.png"},194:function(e,t,r){"use strict";r(187)},195:function(e,t,r){(t=r(50)(!1)).push([e.i,".m-1[data-v-8211070e]{margin:1rem 0!important}.card[data-v-8211070e]{height:100%}",""]),e.exports=t},196:function(e,t,r){"use strict";r.r(t);r(11);var o={head:function(){return{title:"Identiface | Face Verify"}},created:function(){},mounted:function(){var e=this;this.token="",this.notice="You need to verify before proceeding with the transfer.",this.alerts("You're about to transfer more than your daily limit. Verification is needed.","is-danger",5e3),r(189),window.iProovEvent=function(t){var r=document.getElementsByTagName("PROGRESS");switch(t.type){case"aborted":e.alerts("You've aborted the process.","is-danger",5e3);break;case"passed":case"failed":r[0].setAttribute("value",100),e.validateResult();break;case"error":e.alerts("Error: "+t.detail.reason,"is-danger",5e3);break;case"ready":r[0].setAttribute("value",10),e.alerts("Ready to begin face verification","is-success",3e3);break;case"unsupported":e.alerts("Not supported!","is-danger",5e3);break;case"permission":e.alerts("Please enable permissions to continue","is-info",3e3);break;case"permission_denied":e.alerts("You need to enable camera permissions to continue","is-warning",3e3);break;case"progress":r[0].style.visibility="visible";for(var o=r[0].getAttribute("value"),n=t.detail.progress-o,c=o;c<n;c++)r[0].setAttribute("value",t.detail.progress);t.detail.progress>40&&t.detail.progress<60?(r[0].classList.remove("is-primary"),r[0].classList.add("is-info")):t.detail.progress>60&&(r[0].classList.remove("is-info"),r[0].classList.add("is-success"));break;case"feedback":e.alerts(t.detail.reason,"is-info",5e3);default:console.log("sp-face"+t.detail.type+" "+t.type)}}},data:function(){return{notice:"Thank you for signing up.",columnA:"column is-6 is-offset-3",label:"Validate NRIC",token:"",activeStep:0,title:"Verification",account:"177-77777-777",amount:"S$ 9,999,999.99",service_id:"SingPass",user_id:"G2957839M",transaction_type:"SingPass onboarding",image:"",validated:!1,verified:!1,backendPass:"ndi-api",isLoading:!1,isCardModalActive:!0,isPrivacyAssuranceActive:!1}},methods:{startVerify:function(){var e=this;this.validateNRIC().then((function(t){""!=t&&(e.validated=!0,e.activeStep=1,e.openLoading())})).catch((function(t){if(null!=t.response){var r=t.response.data;e.alerts(r.message,"is-danger",2e3)}else console.log(t),e.alerts("ERROR: Service is offline","is-danger",5e3)}))},alerts:function(e,t,r){this.$buefy.toast.open({duration:r,message:e,type:t,queue:!1,canvasWidth:800,canvasHeight:800})},validateNRIC:function(){var e=this;return new Promise((function(t,r){e.token="";e.$axios.$post("/face/verify/token",{user_id:e.user_id,service_id:e.service_id,transaction_type:e.transaction_type,pw:e.backendPass}).then((function(r){if("error"==r.type)e.alerts(r.status+" "+r.message.error_description,"is-danger",5e3),e.notice="Your NRIC is invalid or does not exist in the SingPass database.";else{var o=r.token;e.token=r.token,e.alerts("NRIC validated!","is-success",2e3),e.notice="We'll need to verify your identity now.",t(o)}})).catch((function(t){if(e.token="",null!=t.response){var r=t.response.data;e.notice="Your NRIC is invalid or does not exist in the SingPass database.",e.alerts("User doesn't exist in the SingPass database","is-danger",2e3),console.log(r)}else e.notice="Verification service is offline.",e.alerts("ERROR: Service is offline","is-danger",5e3)}))}))},validateResult:function(){var e=this;this.$axios.$post("/face/verify/validate",{user_id:this.user_id,service_id:this.service_id,token:this.token,pw:this.backendPass}).then((function(t){if("success"==t.type){var r=t.is_passed,o=(t.reason,Math.ceil(100*t.score));r&&o>70?(e.verified=!0,e.notice="Transaction successful!",e.title="Success!",e.alerts("You have successfully transferred S$ 9,999,999.99 to account number 177-77777-777.","is-success",1e4)):e.alerts("Failed verification","is-danger",5e3)}else{var n=t.message;console.log(t),e.alerts(n.error_description,"is-danger",5e3)}})).catch((function(t){if(null!=t.response){var r=t.response.data.message.error_description;e.alerts(r,"is-danger",2e3)}else e.alerts("ERROR: Service is offline","is-danger",5e3)}))},openLoading:function(){var e=this;this.isLoading=!0,setTimeout((function(){e.isLoading=!1;var t=e.$el.querySelector("iproov-me");t.addEventListener("ready",iProovEvent),t.addEventListener("started",iProovEvent),t.addEventListener("aborted",iProovEvent),t.addEventListener("streamed",iProovEvent),t.addEventListener("progress",iProovEvent),t.addEventListener("passed",iProovEvent),t.addEventListener("failed",iProovEvent),t.addEventListener("error",iProovEvent),t.addEventListener("unsupported",iProovEvent),t.addEventListener("permission",iProovEvent),t.addEventListener("permission_denied",iProovEvent)}),500)}}},n=(r(194),r(20)),component=Object(n.a)(o,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("section",{staticClass:"section"},[o("div",{staticClass:"columns"},[o("div",{staticClass:"column is-half is-offset-one-quarter has-text-centered"},[o("p",[e._v(e._s(this.notice))])])]),e._v(" "),o("div",{staticClass:"columns"},[o("div",{class:e.columnA},[o("b-steps",{attrs:{animated:!0,rounded:!1,"has-navigation":!1},model:{value:e.activeStep,callback:function(t){e.activeStep=t},expression:"activeStep"}},[o("b-step-item",{attrs:{step:"1",label:"Transfer details",clickable:!1}},[o("h1",{staticClass:"title has-text-centered"},[e._v("Transfer details")]),e._v(" "),o("div",{staticClass:"card"},[o("div",{staticClass:"card-content"},[o("div",{staticClass:"content"},[o("form",{on:{submit:function(t){return t.preventDefault(),e.startVerify(t)}}},[o("b-field",{attrs:{label:"Transfer to account"}},[o("b-input",{attrs:{placeholder:"",required:"",disabled:!0},model:{value:e.account,callback:function(t){e.account=t},expression:"account"}})],1),e._v(" "),o("b-field",{attrs:{label:"Amount"}},[o("b-input",{attrs:{placeholder:"",required:"",disabled:!0},model:{value:e.amount,callback:function(t){e.amount=t},expression:"amount"}})],1),e._v(" "),o("b-field",{attrs:{label:"Key in your NRIC/FIN number to confirm"}},[o("b-input",{attrs:{placeholder:"S7012345A",required:"",disabled:e.validated},model:{value:e.user_id,callback:function(t){e.user_id=t},expression:"user_id"}})],1),e._v(" "),"G2957839M"==this.user_id?o("a",{staticClass:"is-primary is-size-7",on:{click:function(t){e.user_id="G2834561K"}}},[o("u",[e._v("Set to a dummy NRIC persona that will fail verification")])]):o("a",{staticClass:"is-primary is-size-7",on:{click:function(t){e.user_id="G2957839M"}}},[o("u",[e._v("Set to a dummy NRIC persona that will pass verification")])]),e._v(" "),o("br"),o("br"),e._v(" "),o("b-button",{staticClass:"is-dark",attrs:{type:"submit",disabled:!(!e.validated&&9==this.user_id.length)},on:{click:e.startVerify}},[e._v("Next")])],1)])])])]),e._v(" "),o("b-step-item",{attrs:{step:"2",label:"Verification",clickable:!1}},[o("h1",{staticClass:"title has-text-centered"},[e._v(e._s(e.title))]),e._v(" "),o("div",{staticClass:"card"},[o("div",{staticClass:"card-content"},[e.verified?o("div",{ref:"verifyCard",staticClass:"content",staticStyle:{"justify-content":"center"}},[o("img",{staticStyle:{"max-height":"30vh"},attrs:{src:r(188)}}),e._v(" "),o("h1",[e._v("Success!")]),e._v(" "),o("h3",[e._v(e._s(e.amount)+" was transferred to account number "+e._s(e.account)+".")])]):e._e(),e._v(" "),e.verified?e._e():o("div",{ref:"verifyCard",staticClass:"content"},[o("h4",[e._v("Verify your identity with SingPass Face")]),e._v(" "),o("img",{attrs:{src:r(186)}}),e._v(" "),o("br"),e._v(" "),o("a",{staticClass:"is-primary is-size-7",on:{click:function(t){e.isPrivacyAssuranceActive=!0}}},[e._v("\n                                    Read SingPass Face Privacy Assurance\n                                ")]),e._v(" "),o("br"),e._v(" "),o("br"),e._v(" "),o("p",[e._v("Verification progress:")]),e._v(" "),o("progress",{staticClass:"progress is-large is-primary",attrs:{id:"progress-bar",value:"0",max:"100",hidden:""}},[e._v("0")]),e._v(" "),o("hr"),e._v(" "),o("b-loading",{attrs:{"is-full-page":!1,active:e.isLoading,"can-cancel":!0},on:{"update:active":function(t){e.isLoading=t}}}),e._v(" "),e.validated?o("iproov-me",{ref:"iproov",attrs:{token:e.token,base_url:"https://stg-bio-stream.singpass.gov.sg",logo:"https://www.ndi-api.gov.sg/assets/img/ndi-api-logo.png",assets_url:"/"}},[o("div",{staticClass:"m-1",attrs:{slot:"no_camera"},slot:"no_camera"},[o("p",{staticClass:"has-text-danger"},[e._v("You don't have a camera on your device."),o("br")])]),e._v(" "),o("div",{staticClass:"m-1",attrs:{slot:"grant_permission"},slot:"grant_permission"},[o("p",{staticClass:"has-text-grey-dark"},[e._v("Before we proceed, please allow us to access your camera."),o("br")])]),e._v(" "),o("div",{staticClass:"m-1",attrs:{slot:"grant_button"},slot:"grant_button"},[o("b-button",{staticClass:"is-warning"},[e._v("Allow camera access")]),o("br"),o("br"),e._v(" "),o("a",{staticClass:"has-text-grey",attrs:{href:"/"}},[o("u",[e._v("Use another way to verify my identity")])])],1),e._v(" "),o("div",{staticClass:"m-1",attrs:{slot:"permission_denied"},slot:"permission_denied"},[o("p",{staticClass:"has-text-danger"},[e._v("You've denied permissions. If you would like to continue with the verification, please refresh the page."),o("br")])]),e._v(" "),o("div",{staticClass:"m-1",attrs:{slot:"ready"},slot:"ready"},[o("p",{staticClass:"has-text-grey-dark"},[e._v("Thank you. Please proceed to verify your identity."),o("br")])]),e._v(" "),o("div",{staticClass:"m-1",attrs:{slot:"button"},slot:"button"},[o("b-button",{staticClass:"is-primary"},[e._v("Scan my face")])],1),e._v(" "),o("div",{staticClass:"m-1",attrs:{slot:"cancelled"},slot:"cancelled"},[o("p",{staticClass:"has-text-grey-dark"},[e._v("If you'd like to try again, please click the button below."),o("br")])]),e._v(" "),o("div",{staticClass:"m-1",attrs:{slot:"progress"},slot:"progress"},[o("p",{staticClass:"has-text-grey-dark"},[e._v("Verifying, please wait..."),o("br")]),e._v(" "),o("progress",{staticClass:"progress is-small is-primary",attrs:{max:"100"}},[e._v("15%")])]),e._v(" "),o("div",{staticClass:"m-1",attrs:{slot:"passed"},slot:"passed"},[o("p",[e._v("You have successfully transferred.")])]),e._v(" "),o("div",{staticClass:"m-1",attrs:{slot:"failed"},slot:"failed"},[o("p",[e._v("You have failed verification. Retry?")])]),e._v(" "),o("div",{staticClass:"m-1",attrs:{slot:"error"},slot:"error"},[o("p",{staticClass:"has-text-grey-dark"},[e._v("Oh no, something went wrong. Please try again."),o("br")]),e._v(" "),o("a",{staticClass:"button is-warning",attrs:{href:"/"}},[e._v("Retry")])])]):e._e()],1)])])])],1)],1)]),e._v(" "),o("b-modal",{attrs:{active:e.isCardModalActive,width:640,scroll:"keep"},on:{"update:active":function(t){e.isCardModalActive=t}}},[o("div",{staticClass:"card"},[o("div",{staticClass:"card-content"},[o("div",{staticClass:"content"},[o("p",[o("b",[e._v("Welcome to the Face Verify API demo.")])]),e._v(" "),o("p",{staticClass:"is-italic"},[e._v("The Face Verify Service contains a face-scanning module with Presentation-Attack-Detection (PAD) and liveness detection technologies that you can use to embed into your frontend, with API endpoints to validate the user's identity and results.")]),e._v(" "),o("p",[e._v("In this sample transaction authorisation demo, we will be using a dummy NRIC persona "),o("code",[e._v("G2957839M")]),e._v(", which will return an always "),o("code",[e._v("true")]),e._v(" result when verifying the identity, regardless of the face.")]),e._v(" "),o("p",[e._v("If you'd like to test a flow that will "),o("b",[e._v("fail")]),e._v(" authentication, please replace the dummy NRIC persona to "),o("code",[e._v("G2834561K")]),e._v(". This will return a "),o("code",[e._v("false")]),e._v(" match result.")]),e._v(" "),o("br"),e._v(" "),o("a",{staticClass:"button is-primary",on:{click:function(t){e.isCardModalActive=!1}}},[e._v("Close")])])])])]),e._v(" "),o("client-only",[o("b-modal",{attrs:{active:e.isPrivacyAssuranceActive,width:640,scroll:"keep"},on:{"update:active":function(t){e.isPrivacyAssuranceActive=t}}},[o("div",{staticClass:"card"},[o("div",{staticClass:"card-content"},[o("div",{staticClass:"content",staticStyle:{"overflow-y":"scroll","max-height":"90vh !important"}},[o("img",{attrs:{src:r(186)}}),e._v(" "),o("h5",[o("b",[e._v("Verifying your identity with SingPass Face")])]),e._v(" "),o("hr"),e._v(" "),o("br"),e._v(" "),o("p",[e._v("The new SingPass face verification feature makes it easy for you to verify your identity by scanning your face. We are committed to protecting your data when you use the SingPass face verification feature:")]),e._v(" "),o("br"),e._v(" "),o("b",[e._v("1. Your consent is key")]),e._v(" "),o("hr"),e._v(" "),o("p",[e._v("You will be asked to give consent for the system to capture your facial images electronically and use that data to verify your identity for access to government digital services.")]),e._v(" "),o("br"),e._v(" "),o("b",[e._v("2. You are protected against fraud")]),e._v(" "),o("hr"),e._v(" "),o("p",[e._v("You will be asked to give consent for the system to capture your facial images electronically and use that data to verify your identity for access to government digital services.")]),e._v(" "),o("br"),e._v(" "),o("b",[e._v("3. Your data is encrypted")]),e._v(" "),o("hr"),e._v(" "),o("p",[e._v("All captured facial images are encrypted and protected with advanced technologies to prevent unauthorised access. Additional measures, such as security incident monitoring, are also put in place to ensure that your personal data is securely protected.")]),e._v(" "),o("br"),e._v(" "),o("b",[e._v("4. Storage of your image is time-limited")]),e._v(" "),o("hr"),e._v(" "),o("p",[e._v("The system will only keep the captured facial images for 30 days for audit purposes. Thereafter, the images will be deleted. There is no collection or storing of any other personal data from you on the system. Your data will not be used for any surveillance or commercial purposes.")]),e._v(" "),o("p",[e._v("If you do not wish to use the SingPass face verification feature, you may use other available way of authentication, such as SMS OTP.")]),e._v(" "),o("br"),e._v(" "),o("small",{staticClass:"is-italic"},[e._v("Privacy Assurance as of 08 July 2020")]),e._v(" "),o("br"),e._v(" "),o("br"),e._v(" "),o("br"),e._v(" "),o("br"),e._v(" "),o("br")])])])])],1)],1)}),[],!1,null,"8211070e",null);t.default=component.exports}}]);